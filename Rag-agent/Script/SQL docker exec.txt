#### KÃ¸res fra Consol

docker exec ai-chat-api python -c "
from langchain_chroma import Chroma
from langchain_openai import OpenAIEmbeddings

db = Chroma(
    persist_directory='/app/chroma_collections/it_servicedesk',
    embedding_function=OpenAIEmbeddings(),
    collection_name='it_servicedesk'
)

# Hent ALLE dokumenter
results = db.get(include=['metadatas', 'documents'])

print(f'Antal dokumenter: {len(results[\"ids\"])}')
print('=' * 50)

for i, (doc_id, metadata, content) in enumerate(zip(results['ids'], results['metadatas'], results['documents'])):
    print(f'\n--- Dokument {i+1} ---')
    print(f'ID: {doc_id}')
    print('Metadata:')
    for key, value in metadata.items():
        print(f'  {key}: {value}')
    print(f'Content preview: {content[:200]}...' if len(content) > 200 else f'Content: {content}')
"



##### For alle 3 collections:


docker exec ai-chat-api python -c "
from langchain_chroma import Chroma
from langchain_openai import OpenAIEmbeddings

collections = ['it_servicedesk', 'gdpr_advisor', 'it_support']

for col_name in collections:
    print(f'\n{\"=\" * 50}')
    print(f'COLLECTION: {col_name}')
    print('=' * 50)
    
    try:
        db = Chroma(
            persist_directory=f'/app/chroma_collections/{col_name}',
            embedding_function=OpenAIEmbeddings(),
            collection_name=col_name
        )
        results = db.get(include=['metadatas'])
        print(f'Antal chunks: {len(results[\"ids\"])}')
        
        if results['metadatas']:
            print('Metadata felter:', list(results['metadatas'][0].keys()))
    except Exception as e:
        print(f'Fejl: {e}')
"
